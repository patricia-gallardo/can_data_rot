<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/turtle2.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>
<div class="reveal">
    <div class="slides">

        <section data-background-transition="fade-in fade-out" data-background="images/graffiti-6756282_1920.jpg" class="fig-container" data-file="d3-fig/fig/intro_bubbles.html" data-preload>
        </section>

        <section>
            <header style="text-align: left;">
                <h1 class="fragment">Can Data Rot?</h1>
                <h2 class="fragment">Forgetting History</h2>
                <h3 class="fragment">Patricia Aas</h3>
                <h3 class="fragment">NAV 2024</h3>
            </header>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h1 class="fragment">Patricia Aas</h1>
            <h2 class="fragment">Professional programmer since 2005</h2>
            <h4 class="fragment">Might have a problem with letting stuff go</h4>
        </section>

        <section style="display: flex; flex-direction: column;">
                <h2>Some of NAV ITs Frame Agreements</h2>
                <div class="fragment fig-container" data-file="d3-fig/fig/frame_list.html" data-preload
                     style="width: 1920px; height: 150px; "></div>
                <h3 class="fragment">Ranging in value from around 500+ million to 4.6 billion NOK</h3>
                <h3 class="fragment">Over the past 20+ years</h3>
        </section>

<!--        <section>-->
<!--            <div class="col-100 fig-container" data-file="d3-fig/eclipses.html"></div>-->
<!--        </section>-->

        <section class="fig-container" data-file="d3-fig/fig/nav_winners.html" data-preload
                 style="display: flex; flex-direction: column;">
            <h2 style="align-self: flex-start">Or like this?</h2>
        </section>

        <section class="fig-container" data-file="d3-fig/fig/nav_winners2.html" data-preload
                 style="display: flex; flex-direction: column;">
            <h2 style="align-self: flex-start">Actually it's like this</h2>
            <h3 style="align-self: flex-start" class="fragment">Why that is</h3>
            <h3 style="align-self: flex-start" class="fragment">Is what this talk is about</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h3 class="fragment">I was told by an experienced Data Engineer</h3>
            <h2 class="fragment">"Data Engineering might lead to Data Hoarding"</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h3 class="fragment">So, I guess, this is me saying</h3>
            <h2 class="fragment">I might have a problem</h2>
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/graffiti-8671035_1280.jpg" alt=""
                 style="width: 700px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
<!--                <h2 class="fragment">Background</h2>-->
                <p class="fragment">Last year the consultancy market dried up</p>
                <p class="fragment">TurtleSec is a small consultancy</p>
                <p class="fragment">To try to understand and navigate the public procurement market</p>
                <p class="fragment">I wrote some terrible JavaScript and Python</p>
            </div>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h3 class="fragment">For that I needed data</h3>
            <h2 class="fragment">Luckily DFØ has open data as CSVs</h2>
            <h3 class="fragment">But only for 2018-2022</h3>
            <h3 class="fragment">It also has mistakes in it</h3>
            <h3 class="fragment">And missing data</h3>
            <!-- https://dfo.no/nokkeltall-og-statistikk/innkjop-i-offentlig-sektor/kunngjoringer-av-konkurranse-pa-doffin#anchorTOC_Last_ned_datasettene_for_de_ulike_%C3%A5rene%3A_8 -->
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2>Hoarding Data Part I</h2>
            <h3 class="fragment">The mysteriously absent CSV data for 2023</h3>
            <h4 class="fragment">Scraping Classic Doffin with Python and Google Apps Scripts</h4>
            <div class="fragment fig-container" data-file="d3-fig/fig/data_hoarding.html" data-preload
                 style="width: 1920px; height: 400px; "></div>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h3 class="fragment">But Classic Doffin is so slow</h3>
            <h3 class="fragment">Loading 1 procurement notice could easily take 20-30 seconds</h3>
            <h3 class="fragment">A single year has 10.000-20.000 for Norway</h3>
            <h3 class="fragment">Scraping a year often took a week</h3>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/data_hoarding.html" data-preload-->
<!--                 style="display: flex; flex-direction: row; justify-content: center;">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">-->
<!--                <h2>Hoarding Data</h2>-->
<!--                <h3 class="fragment">The mysteriously absent CSV data for 2023</h3>-->
<!--            </div>-->
<!--        </section>-->

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/graffiti-8671035_1280.jpg" alt=""
                 style="width: 700px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
<!--                <h2 class="fragment">Background</h2>-->
                <p class="fragment">Then a few of us were between assignments</p>
                <p class="fragment">So we decided to make a better version of my terrible scripts</p>
                <p class="fragment">This time in Kotlin and React on Kubernetes</p>
            </div>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2>Hoarding Data Part II</h2>
            <h3 class="fragment">Scraping HTML felt so unprofessional</h3>
            <h4 class="fragment">Enter TED and it's ftp server</h4>
            <div class="fragment fig-container" data-file="d3-fig/fig/data_hoarding2.html" data-preload
                 style="width: 1920px; height: 400px; "></div>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/data_hoarding2.html" data-preload-->
<!--                 style="display: flex; flex-direction: row; justify-content: center;">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">-->
<!--                <h2>Hoarding Data Part II</h2>-->
<!--                <h3 class="fragment">Scraping HTML felt so unprofessional</h3>-->
<!--            </div>-->
<!--        </section>-->

        <section class="fig-container" data-file="d3-fig/fig/data_hoarding3.html" data-preload
                 style="display: flex; flex-direction: row; justify-content: center;">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">
                <h2>Hoarding Data Part III</h2>
                <h3 class="fragment">Discovering Doffin XML</h3>
            </div>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/data_hoarding3.html" data-preload-->
<!--                 style="display: flex; flex-direction: row; justify-content: center;">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">-->
<!--                <h2>Hoarding Data Part III</h2>-->
<!--                <h3 class="fragment">Discovering Doffin XML</h3>-->
<!--            </div>-->
<!--        </section>-->

        <section class="fig-container" data-file="d3-fig/fig/data_hoarding4.html" data-preload
                 style="display: flex; flex-direction: row; justify-content: center;">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">
                <h2>Hoarding Data Part IV</h2>
                <h3 class="fragment">Enter New Doffin</h3>
            </div>
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/street-art-7885964_1920.jpg" alt=""
                 style="width: 600px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
                <h2 class="fragment">What does this have to do with NAV IT Frame Agreements?</h2>
            </div>
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/graffiti-3610348_1920.jpg" alt=""
                 style="width: 700px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
                <h2 class="fragment">Why NAV IT</h2>
                <p class="fragment">You asked me to come :P</p>
                <p class="fragment">I was already modelling NAV IT</p>
                <p class="fragment">It's business relevant</p>
                <p class="fragment">NAV IT uses all the features of this system</p>
                <p class="fragment">The frame agreements are big, both in money and in lots</p>
                <p class="fragment">The "org" has gone under a dozen names</p>
                <p class="fragment">How can we even find them and connect them?</p>
                <p class="fragment">If I can find these, then I can handle any data in the set</p>
            </div>
        </section>

<!--        <section style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <h2>Some NAV IT Frame Agreements</h2>-->
<!--            <div class="fig-container" data-file="d3-fig/fig/frame_list.html" data-preload-->
<!--                 style=""></div>-->
<!--        </section>-->

        <section style="display: flex; flex-direction: column; justify-content: center;">
            <h2>The NAV ITs Frame Agreements</h2>
            <div class="fragment fig-container" data-file="d3-fig/fig/frame_list.html" data-preload style="width: 1920px; height: 150px; "></div>
            <h4 class="fragment">There are more, but these are the biggest ones I found</h4>
            <h3 class="fragment">Ranging in value from around 500+ million to 4.6 billion NOK</h3>
            <h4 class="fragment">The colors indicate where you can/could see these on different versions of Doffin</h4>
            <h4 class="fragment">&#128308; Old Doffin &#x1F7E0; "Classic" Doffin &#128994; New Doffin but buggy &#128309; New Doffin</h4>
        </section>

        <section style="display: flex; flex-direction: column; justify-content: center;">
            <h2>And what's up with the graphs?</h2>
            <div style="display: flex; flex-direction: row; justify-content: center;">
                <div class="col-50">
                    <div class="fig-container" data-file="d3-fig/fig/nav_winners.html"></div>
                </div>
                <div class="col-50">
                    <div class="fig-container" data-file="d3-fig/fig/nav_winners2.html"></div>
                </div>
            </div>
        </section>

        <section style="display: flex; flex-direction: column; justify-content: center; text-align: left">
            <h2>Dev Teams Tackling Norwegian Public Procurement: 2003-2024</h2>
            <p class="fragment">All info about these teams is deduced from the data, and is probably at least a little bit wrong</p>
            <h4 class="fragment">&#128309; 2023-now: Team "New" Doffin</h4>
            <h4 class="fragment">&#128995; 2012-2023: Team "Classic" Doffin</h4>
            <h4 class="fragment">&#x1F7E0; 2005-2011: Team "Old" Doffin</h4>
            <h4 class="fragment">&#128993; 2003-2005: Team "Norsk lysingsblad"</h4>
        </section>

        <section class="fig-container" data-file="d3-fig/fig/boxplot.html" data-preload
                 style="display: flex; flex-direction: column; justify-content: center;">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">
                <h2>Notices rendered on the web by each team's solution</h2>
                <div class="fragment">Lighter tail is older notices it could still (partially) render</div>
            </div>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h3 class="fragment">This shows a sliding window</h3>
            <h3 class="fragment">into each team trying to convince the world</h3>
            <h3 class="fragment">that the past doesn't really matter</h3>
            <h3 class="fragment">And from now on...</h3>
            <h2 class="fragment">...things will be different</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">And it probably wasn't a hard sell</h2>
            <h3 class="fragment">who cares about the past anyway?</h3>
            <h3 class="fragment">We have demands from real customers, right now</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Does it matter?</h2>
            <h2 class="fragment">What do we want history for?</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Why have public procurements anyway?</h2>
            <h3 class="fragment">To ensure sufficient competition, so that public costs are kept in check</h3>
            <h3 class="fragment">To prevent corruption, through a transparent process</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Corruption?</h2>
            <h1 class="fragment">In Norway?</h1>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">The Unibuss Corruption Scandal</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">The Unibuss Corruption Scandal</h2>
            <h4 class="fragment">In 2014 6 people were sentenced to between 6 months and 5.5 years in prison for corruption</h4>
            <h4 class="fragment">The corruption spanned more than a decade</h4>
            <h4 class="fragment">The board and leadership had been warned about the practice since the late nineties</h4>
            <h4 class="fragment">The employee representative to the board was later joined by others in warning about the practice</h4>
            <h4 class="fragment">They also tried to warn politicians</h4>
            <h4 class="fragment">They and the evidence they had amassed, were consistently ignored</h4>
            <h4 class="fragment">Only once became a part of a corruption case in Germany did anything happen</h4>
            <h4 class="fragment">The police independently started an investigation</h4>
            <h4 class="fragment">The conspirators included 4 of Unibuss' top leadership</h4>
            <h3 class="fragment">Including the CEO and the head of procurement</h3>
        </section>

        <section style="display: flex; flex-direction: column; justify-content: center; align-content: center">
            <h2>What data is currently publicly available?</h2>
            <div class="fragment fig-container" data-file="d3-fig/fig/years_list.html" data-preload style="width: 1920px; height: 150px; "></div>
            <div style="text-align: left; align-self: center">
                <h4 class="fragment">&#128993; "Norsk lysingsblad" has probably been offline since 2006</h4>
                <h4 class="fragment">&#x1F7E0; "Old Doffin" has probably been offline since 2010</h4>
                <h4 class="fragment">&#128995; "Classic Doffin" has been offline since early 2024</h4>
                <h4 class="fragment">&#128309; "New Doffin" <em>is the only one</em> currently online</h4>
            </div>
        </section>

        <section class="fig-container" data-file="d3-fig/fig/boxplot2.html" data-preload
                 style="display: flex; flex-direction: column; justify-content: center;">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">
                <h2>What Doffin data is currently online?</h2>
            </div>
        </section>

        <section data-background-transition="fade-in fade-out" data-background="images/graffiti-8171254_1920.jpg">
        </section>

        <section class="fig-container" data-file="d3-fig/fig/barplot.html" data-preload
                 style="display: flex; flex-direction: column; justify-content: center;">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">
                <h2>EU report</h2>
                <h3>The expected level was 30</h3>
            </div>
        </section>

        <section data-background-transition="fade-in fade-out" data-background="images/spray-can-7037370_1920.jpg">
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">How hard can it be?</h2>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/years_list.html" data-preload-->
<!--                 style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-start; justify-content: flex-start; align-items: flex-start">-->
<!--                <h2>Years supported by the different Doffin implementations</h2>-->
<!--            </div>-->
<!--        </section>-->

<!--        <section style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <h2>SHORT LIST TEST</h2>-->
<!--            <div class="fig-container" data-file="d3-fig/list_short.html" data-preload-->
<!--                 style=""></div>-->
<!--        </section>-->

<!--        <section style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <h2>LIST TEST</h2>-->
<!--            <div class="fig-container" data-file="d3-fig/list.html" data-preload-->
<!--                 style=""></div>-->
<!--        </section>-->

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <div>
                <h2 style="text-align: left;">Doffin</h2>
                <h2 style="text-align: left;">XML</h2>
                <h2 style="text-align: left;">versions</h2>
                <h2 style="text-align: left;">used by</h2>
                <h2 style="text-align: left;">NAV IT</h2>
            </div>
            <div class="fig-container" data-file="d3-fig/fig/versions.html" data-preload
                 style=""></div>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/versions.html" data-preload-->
<!--                 style="">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-end; justify-content: flex-end; align-items: flex-end">-->
<!--                <h2 style="align-self: flex-end; text-align: right;">Doffin versions used by NAV IT</h2>-->
<!--            </div>-->
<!--        </section>-->

        <section class="fig-container" data-file="d3-fig/fig/ted_versions.html" data-preload
                 style="">
            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-end; justify-content: flex-end; align-items: flex-end">
                <h2 style="align-self: flex-end; text-align: right;">TED versions used with Norwegian notices</h2>
            </div>
        </section>

<!--        <section class="fig-container" data-file="d3-fig/fig/ted_versions.html" data-preload-->
<!--                 style="">-->
<!--            <div style="width: 1920px; height: 980px; display: flex; flex-direction: column; align-content: flex-end; justify-content: flex-end; align-items: flex-end">-->
<!--                <h2 style="align-self: flex-end; text-align: right;">TED versions used with Norwegian notices</h2>-->
<!--            </div>-->
<!--        </section>-->

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">First of all...</h2>
            <h2 class="fragment">I should apologize</h2>
            <h2 class="fragment">I have been simplifying a bit</h2>
            <h2 class="fragment">Because...</h2>
            <h2 class="fragment">there is actually a multiplier here</h2>
            <h2 class="fragment">there are variations over a lot of these versions</h2>
            <h2 class="fragment">So, in advance...</h2>
            <h2 class="fragment">Sorry</h2>
        </section>

        <section style="text-align: left; display: flex; flex-direction: column;">
            <h2 class="fragment">Within the R.X.X.X series</h2>
            <h2 class="fragment">There are variation "families"</h2>
            <h3 class="fragment">TED_EXPORT: Used by TED as far back as 2007, up to 2023</h3>
            <h3 class="fragment">DOFFIN_ESENDERS: Used by Doffin, including NAV IT 2014-23</h3>
            <h3 class="fragment">TED_ESENDERS: Used by Doffin, including NAV IT 2012-13</h3>
            <h3 class="fragment">INTERNAL_OJS: Ignoring, not visible in public data</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Also...</h2>
            <h2 class="fragment">I need to reduce the font size</h2>
            <h2 class="fragment">Because...</h2>
            <h2 class="fragment">well... you'll see</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">The XML versions I have schemas for</h2>
        </section>

        <section class="fig-container" data-file="d3-fig/fig/schemas.html" data-preload style="">
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Attempt number 1</h2>
            <h3 class="fragment">I did what I think most people would do</h3>
            <h3 class="fragment">What I think my predecessors did</h3>
            <h3 class="fragment">I went backwards in time</h3>
        </section>

        <section style="display: flex; flex-direction: column; justify-content: center;">
            <h2>Using JAXB to generate parsing code in Java from the schemas</h2>
            <h3 class="fragment">eForms and TED_EXPORT for R2.0.9 and R2.0.8</h3>
            <div class="fragment fig-container" data-file="d3-fig/fig/attempt1.html" data-preload style="width: 1920px; height: 200px; "></div>
            <h2 class="fragment">It was terrible</h2>
            <h3 class="fragment">The generated types and APIs were very similar within R2.0.9 and R2.0.8</h3>
            <h3 class="fragment">But subtly different, so couldn't share code</h3>
            <h3 class="fragment">Most frustrating: Typo fixing in tag names</h3>
            <h3 class="fragment">Getting a new piece of information meant adding support across 9 parsers</h3>
            <h3 class="fragment">Copy, paste and modify</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">How many types are we talking about?</h2>
            <h3 class="fragment">Each schema is a collection of forms</h3>
            <h3 class="fragment">R.2.0.9 versions have 18-19 different forms</h3>
            <h3 class="fragment">Late R.2.0.8 versions, which were only for defense, have only 7 different forms</h3>
            <h3 class="fragment">However, early R.2.0.8 versions, only for defense, have 23 different forms</h3>
            <h3 class="fragment">How similar are these?</h3>
            <h3 class="fragment">How often is one specific form used?</h3>
        </section>

        <!-- Add pie chart -->
        <section>
            <h2>Pie charts</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">For this to scale I needed to share code</h2>
            <h3 class="fragment">When you multiply up the number of versions in use with all the different forms we have</h3>
            <h3 class="fragment">Number of schema versions: ~30</h3>
            <h3 class="fragment">Number of forms per schema version: ~20</h3>
            <h3 class="fragment">We possibly have around 600 different forms</h3>
            <h3 class="fragment">From which we need to extract pretty much the same information</h3>
            <h3 class="fragment">From forms that are very similar but not the same</h3>
            <h3 class="fragment">And the generated types for them, that are very similar, but not the same</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">I desperately wanted C++ templates</h2>
            <h3 class="fragment">To write templated functions that I could use with similar types accross "all" the forms</h3>
            <h3 class="fragment">As long as the types had the specific features I needed</h3>
            <h3 class="fragment">I wanted compile-time "duck typing" like in C++</h3>
            <h3 class="fragment">“If it walks like a duck, and it quacks like a duck, then it must be a duck.”</h3>
            <h3 class="fragment">Kotlin/Java generics can't do that</h3>
            <h3 class="fragment">But this is not a C++ talk, so never mind</h3>
            <h3 class="fragment">I explored options for Kotlin</h3>
            <h3 class="fragment">They were all varying degrees of bad</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Kotlin has something else though</h2>
            <h3 class="fragment">Extension functions</h3>
            <h3 class="fragment">I can add functions to someone else's type</h3>
            <h3 class="fragment">And I have a lot of those, each schema generates thousands of classes</h3>
            <h3 class="fragment">But extension functions are attached to a single type</h3>
            <h3 class="fragment">However, this time, I'm starting from the beginning</h3>
            <h3 class="fragment">I don't have any schemas, that is something I need to figure out</h3>
            <h3 class="fragment">Maybe I could write a new schema set that I can use across many versions?</h3>
            <h3 class="fragment">A magic schema set, generating common types and then using Kotlin extension functions to share code?</h3>
        </section>

        <section data-auto-animate style="display: flex; flex-direction: column; justify-content: center;">
            <h2 data-id="code-title" class="fragment">Extension functions could work, if we have common types</h2>
            <pre data-id="code-animation" class="fragment">
                <code class="hljs kotlin" data-trim data-line-numbers="1|1-3">
                    <script type="text/template">
                        private fun CONTRACT.getFormType(): FormType {
                            return NoticeFormType.CONTRACT_NOTICE.toFormType()
                        }
                    </script>
                </code>
            </pre>
        </section>

        <section data-auto-animate style="display: flex; flex-direction: column; justify-content: center;">
            <h2 data-id="code-title">We could write each function once for each common type</h2>
            <pre data-id="code-animation">
                <code class="hljs kotlin" data-trim data-line-numbers="|1-3|5-13|11|15-22">
                    <script type="text/template">
                        private fun CONTRACT.getFormType(): FormType {
                            return NoticeFormType.CONTRACT_NOTICE.toFormType()
                        }

                        private fun CONTRACT.getContractType(): ContractType {
                            val ctype = this.fdcontract.ctype ?: return ContractType(code = "UNKNOWN", label = "UNKNOWN")
                            return when (ctype) {
                                "WORKS"    -> ContractType(code = "1", label = "Works")
                                "SUPPLIES" -> ContractType(code = "2", label = "Supplies")
                                "SERVICES" -> ContractType(code = "4", label = "Services")
                                else       -> TODO("Unknown ContractType : $ctype")
                            }
                        }

                        private fun CONTRACT.getProcedureType(): ProcedureType {
                            val cproc = this.fdcontract.cproc ?: return ProcedureType(code = "UNKNOWN", label = "UNKNOWN")
                            return when (cproc) {
                                "OPEN"       -> ProcedureType(code = "1", label = "Open procedure")
                                "RESTRICTED" -> ProcedureType(code = "2", label = "Restricted procedure")
                                else         -> TODO("Unknown ProcedureType : $cproc")
                            }
                        }
                    </script>
                </code>
            </pre>
        </section>

        <section data-auto-animate style="display: flex; flex-direction: column; justify-content: center;">
            <h2 data-id="code-title">With Animations</h2>
            <pre data-id="code-animation">
                <code class="hljs javascript" data-trim data-line-numbers="|4,8-11|17|22-24">
                    <script type="text/template">
                        import React, { useState } from 'react';

                        function Example() {
                          const [count, setCount] = useState(0);

                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick={() => setCount(count + 1)}>
                                Click me
                              </button>
                            </div>
                          );
                        }

                        function SecondExample() {
                          const [count, setCount] = useState(0);

                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick={() => setCount(count + 1)}>
                                Click me
                              </button>
                            </div>
                          );
                        }
                    </script>
                </code>
            </pre>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Maybe we could use XSLT?</h2>
            <h2 class="fragment">To transform the XMLs to a common format?</h2>
            <h3 class="fragment">Firstly, I am bad at XSLT, also kids today have never even heard of it</h3>
            <h3 class="fragment">TED has an attempt going for R2.0.9 to eForms</h3>
            <h3 class="fragment">It's in development, and it's a whole project, for just 1 transformation</h3>
            <h3 class="fragment">Also, it can't ever fully work</h3>
            <h3 class="fragment">the semantics and fields are very different between R2.0.9 and eForms</h3>
            <h3 class="fragment">I think this is what Doffin is using for R2.0.9</h3>
            <h3 class="fragment">And why that support is patchy and there is no support for R2.0.8</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2>Why does it matter that you only support the past 7 years?</h2>
            <p class="fragment">First of all it isn't 7 years of support</p>
            <h3 class="fragment">R.2.0.8 isn't supported</h3>
            <p class="fragment">It was used by the defense sector all the way to 2023</p>
            <h2 class="fragment">So all defense procurements are gone</h2>
            <h3 class="fragment">Secondly...</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">This is the world's slowest social network</h2>
            <h3 class="fragment">Interactions between companies are often 4-8 years apart</h3>
            <h3 class="fragment">Without a long timespan, you won't see anything</h3>
            <h3 class="fragment">Like watching starfish</h3>
            <h3 class="fragment">It will look like they're standing still</h3>
            <h3 class="fragment">So...</h3>
            <h3 class="fragment">I wasn't giving up</h3>
            <h3 class="fragment">Not yet</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">I had done a lot of TED_EXPORT</h2>
            <h2 class="fragment">But I still had to do all the DOFFIN and TED ESENDER versions</h2>
            <h3 class="fragment">Even with ADHD and hyperfocus</h3>
            <h3 class="fragment">I couldn't do it</h3>
            <h3 class="fragment">Not true</h3>
            <h3 class="fragment">I started with DOFFIN_ESENDERS</h3>
            <h3 class="fragment">And died inside</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">And I didn't even have all the schemas</h2>
            <h3 class="fragment">With TED_EXPORT I could only read from early-2012 to 2023</h3>
            <h3 class="fragment">With Doffin I wouldn't be able to generate parsers for before 2010</h3>
            <h3 class="fragment">Because I had no schemas from before then</h3>
            <h3 class="fragment">As an act of procrastination</h3>
            <h3 class="fragment">I started from the beginning</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Attempt number 2</h2>
            <h3 class="fragment">Starting from the beginning: 2003</h3>
            <h3 class="fragment">I have no schemas</h3>
            <h3 class="fragment">There probably weren't any anyway</h3>
            <h3 class="fragment">Some of it might be DTD based</h3>
            <h3 class="fragment">But I don't have those either</h3>
        </section>

<!--        <section style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <h2>TREE TEST DFS</h2>-->
<!--            <div class="fig-container" data-file="d3-fig/tree.html" data-preload-->
<!--                 style=""></div>-->
<!--        </section>-->

<!--        <section style="display: flex; flex-direction: column; justify-content: center;">-->
<!--            <h2>TREE TEST BFS</h2>-->
<!--            <div class="fig-container" data-file="d3-fig/tree_breadth_first.html" data-preload-->
<!--                 style=""></div>-->
<!--        </section>-->

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">I scraped all the Classic Doffin HTML</h2>
            <h3 class="fragment">But can I republish it?</h3>
            <h3 class="fragment">The data is public</h3>
            <h3 class="fragment">But is the HTML tag structure?</h3>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2>Spoilers: Since we're a mixed crowd</h2>
            <h3 class="fragment">The case study: NAV IT procurements</h3>
            <p class="fragment">The data: 2003-2024 public procurement data from Doffin/TED</p>
            <p class="fragment">Observations: The stewardship of Doffin as seen from the data</p>
            <p class="fragment">Why should we care?</p>
            <p class="fragment">Retro development: XML on the JVM</p>
            <p class="fragment">What didn't work, what did and how Kotlin helped</p>
            <p class="fragment">Data/Dev silos are hurting what we build</p>
            <p class="fragment">Data isn't only in the present tense</p>
            <h3 class="fragment">Data that cannot be analyzed, does it even exist?</h3>
<!--            <p class="fragment">Should you care?</p>-->
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/street-art-7885964_1920.jpg" alt=""
                 style="width: 600px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
                <h2 class="fragment">Data Driven?</h2>
                <p class="fragment">To be "data driven" we have to be able to read the data</p>
                <p class="fragment">Data analysis is always after, it needs to be staffed with devs that have it as their priority</p>
                <p class="fragment">Otherwise, "now" will always win</p>
                <p class="fragment">Operational concerns will win, because the needs they serve are here and now and often external</p>
                <p class="fragment">Data can't be the leftovers at the table once operational concerns are done</p>
                <p class="fragment">The quality of the data will suffer</p>
                <p class="fragment">There often isn't an operational feedback loop for data quality - it's somebody else's problem</p>
                <p class="fragment">To dogfood data you have to make a feedback loop</p>
                <p class="fragment">Communicate why do we need this data</p>
            </div>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <div style="text-align: left">
                <h2>Meta</h2>
                <p class="fragment">Since we're going to talk about data</p>
                <p class="fragment">Some data visualization seems in order</p>
                <p class="fragment">The slides are in Reveal.js</p>
                <p class="fragment">The visualizations are written in d3.js</p>
                <h3 class="fragment">All the data viz is custom for this talk</h3>
                <p class="fragment">I will not take any questions on whether that was a good idea</p>
            </div>
            <div class="fig-container" data-file="d3-fig/bubbles.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/graffiti-6908374_1280.jpg" alt=""
                 style="width: 600px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
                <h2 class="fragment">Doffin</h2>
                <p class="fragment">1</p>
                <p class="fragment">2</p>
                <p class="fragment">3</p>
                <p class="fragment">4</p>
                <p class="fragment">5</p>
                <p class="fragment">6</p>
                <p class="fragment">7</p>
                <p class="fragment">8</p>
            </div>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <h2>GRAPH TEST miserables</h2>
            <div class="fig-container" data-file="d3-fig/graph_miserables.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <h2>GRAPH TEST data_network</h2>
            <div class="fig-container" data-file="d3-fig/graph_data_network.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: column; justify-content: center;">
            <h2>GRAPH TEST 3</h2>
            <div class="fig-container" data-file="d3-fig/graph3.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start">
            <img src="images/modern-3226522_1920.jpg" alt=""
                 style="width: 700px; height: 900px; object-fit: cover; filter: drop-shadow(0 0 0.55rem black);"/>
            <div style="padding-left: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center;">
                <h2 class="fragment">NullPointerException</h2>
                <p class="fragment">What happens if central information is stored off the public record?</p>
                <p class="fragment">What happens when that site is deleted?</p>
                <p class="fragment">https://kgv.doffin.no/ctm/Supplier/Documents/Folder/</p>
                <p class="fragment">Additional information: Norsk lysingsblad's reference: 2004-00239.</p>
                <p class="fragment">5</p>
                <p class="fragment">6</p>
                <p class="fragment">7</p>
                <p class="fragment">8</p>
            </div>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Remote Team Ambassador</h2>
        </section>

        <section style="display: flex; flex-direction: column;">
            <h2 class="fragment">Have a Data person in all operational teams</h2>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <h2>BUBBLES</h2>
            <div class="fig-container" data-file="d3-fig/bubbles.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <h2>BUBBLES OLD</h2>
            <div class="fig-container" data-file="d3-fig/collision-detection.html" data-preload
                 style=""></div>
        </section>

        <section style="display: flex; flex-direction: row; justify-content: center;">
            <h3>Interaction with other elements</h3>

            <div class="row">
                <div class="col-50 left">
                    <p class="small">You can interact with the embedded visualization using elements from the slide.</p>
                    <p class="small">Click on the button to change the color of the nodes to yellow</p>
                    <button class="btn-large btn-warning" id="recolorButton">Recolorize</button>
                    <p class="small">Note: the staged transitions are still active (press right arrow or space)</p>
                </div>
                <div class="col-50">
                    <div class="fig-container" data-file="d3-fig/collision-detection.html"></div>
                </div>
            </div>
        </section>

        <section>
            <header style="text-align: left;">
                <h1 class="fragment">Can Data Rot?</h1>
                <h2 class="fragment">Forgetting History</h2>
                <h3 class="fragment">Patricia Aas</h3>
                <h3 class="fragment">Thank you!</h3>
            </header>
        </section>

    </div> <!-- slides -->

    <footer>
        <div class="slide-number" style="width: 200px; position: absolute; bottom: 10px; left: 10px; font-family: Pacifico; font-size: 40px">
            TurtleSec
        </div>
    </footer>
</div> <!-- Reveal -->

<script src="dist/reveal.js"></script>
<script src="plugin/reveald3/reveald3.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        plugins: [Reveald3, RevealHighlight],
        controls: false,
        progress: true,
        history: true,
        // center: false,
        // disableLayout: false, // Unsure about this....
        transition: 'fade',
        viewDistance: 3, // to lazy load iframes

        // The "normal" size of the presentation, aspect ratio will
        // be preserved when the presentation is scaled to fit different
        // resolutions. Can be specified using percentage units.
        width: 1920,
        height: 1080,
        slideNumber: true,

        // Factor of the display size that should remain empty around
        // the content
        margin: 0.04,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,
        maxScale: 2.0,

        display: 'flex',

        // // optional configurations for reveald3
        reveald3: {

            // If the previous slide is a slide further in the deck (i.e. we come back to
            // slide from the next slide), by default the last fragment transition will be
            // triggered to to get the last state of the visualization and simulate the
            // the state the simulation was in when we left the slide. This can be
            // discarded.
            runLastState: true, //default true

            // If a special onSlideChanged transition has been set (if for example the visualization
            // has been preloaded using the data-preload attribute, and you want a specific transition
            // to happen only when you arrive on the slide), you can choose the delay with which such
            // a transition will occur (note that in the case of no data-preload, if no delay is set then
            // the transition might not occur since the iframe might not be fully loaded yet when the
            // function is triggered). // default 0.
            onSlideChangedDelay: 400,

            // This will prefix the path attributes of the source html paths with the given path.
            // (by default "src" if set to true or with the specified path if string)
            mapPath: false, // default: false

            // If true, will try to locate the file at a fallback url without the mapPath prefix in case no file is found
            // at the stipulated url with mapPath
            tryFallbackURL: false, //default false

            // Checking for file existance has been reported to fail in rare
            // cases though files did exist. This option is to disable the file checking.
            //see: https://github.com/gcalmettes/reveal.js-d3/issues/10
            disableCheckFile: false, //default false,
        },
    });
</script>
</body>
</html>
